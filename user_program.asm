.ORIG x3000
LD R6,START
LD R1,INKB
LD R2,ADDRES
STR R2,R1,#0
;save the address of the begining of our interrupt service into  the invt address
LD R1,KBSR
;giving the interrupt privilege
LD R3,INEN
STR R3,R1,#0
;two pattern to output. 
p0		LDI	R1,Flag
		BRz		p1
		BRnzp	p2
p1 		AND R1,R1,#0
		ADD R1,R1,#-8
WRI		LEA R0,PATTERN1
		PUTS
		ADD R1,R1,#1
		BRn WRI
		LD R0,LINEFEED
		OUT
		JSR	DELAY

		LEA	R0,SPACE
		PUTS
		ADD R1,R1,#-7
WRI1	LEA R0,PATTERN1
		PUTS
		ADD R1,R1,#1
		BRn WRI1
		LD R0,LINEFEED
		OUT
		JSR	DELAY
		BRnzp p0
p2 		AND R1,R1,#0
		ADD R1,R1,#-8
WRI2	LEA R0,PATTERN2
		PUTS
		ADD R1,R1,#1
		BRn WRI2
		LD R0,LINEFEED
		OUT
		JSR	DELAY
		LEA	R0,SPACE
		PUTS
		ADD R1,R1,#-7
WRI3	LEA R0,PATTERN2
		PUTS
		ADD R1,R1,#1
		BRn WRI3
		LD R0,LINEFEED
		OUT
		JSR	DELAY
		BRnzp p0
		

DELAY 	ST R1, SaveR1
		LD R1, COUNT
REP 	ADD R1, R1, #-1
		BRp REP
		LD R1, SaveR1
		RET
COUNT 	.FILL #2500
SaveR1 .BLKW 1
START .FILL x3000
LINEFEED	.FILL x000A
Flag	.FILL	x3200
INKB	.FILL	x0180
ADDRES	.FILL	x2000
KBSR	.FILL	xFE00
INEN	.FILL	x4000
SPACE	.STRINGZ	"   "
PATTERN1	.STRINGZ "**    "
PATTERN2 .STRINGZ "##    "
.END
